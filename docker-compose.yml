version: '3.6'
services:

    db:
        image: mysql:latest
        volumes:
            - db_data:/var/lib/mysql
        restart: always
        ports:
            - "3306:3306"
        environment:
            MYSQL_ROOT_PASSWORD: sondensucher
            MYSQL_DATABASE: sonden
            MYSQL_USER: sondensucher
            MYSQL_PASSWORD: sondensucher

    phpmyadmin:
        depends_on:
            - db
        image: phpmyadmin
        restart: always
        ports:
            - 8081:80
        environment:
            PMA_HOST: db
            MA_USER: sondensucher
            PMA_PASSWORD: sondensucher
            MYSQL_ROOT_PASSWORD: sondensucher

    sondensucher:
        depends_on:
            - db
        image: sondensucher
        #restart: always
        ports:
            - 5000:5000
        volumes: 
            - ./Python:/Python
            - ./logs:/logs

    sondenweb:
        image: sondenweb
        ports:
            - "8001:80"
        volumes:
            - ./www:/var/www
        environment:
            - APP_KEY=SomeRandomStringToAddSecurity123
            - APP_ENV=development
            - APP_DEBUG=true
    
    #TODO Mosquitto Docker einf√ºgen
volumes:
    db_data: {}
